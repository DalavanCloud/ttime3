<!DOCTYPE html>
<html>
  <head>
    <title>TTime3</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40939561-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-40939561-2');
    </script>
  </head>
  <body>
    <h1>TTime3</h1>
    <h2>Settings <a href="#/" class="expando" id="toggle-settings-div"></a></h2>
    <div id="settings-div" hidden>
      <div style="display: flex">
        <label for="catalog-url">Catalog URL</label>
        <input style="flex:1" type="url" id="catalog-url"
        onkeyup="catalogUrlChanged()" onchange="catalogUrlChanged()" />
      </div>

      <div id="reload-please" class="info" style="display: none">
        Catalog URL changed. Please reload for this to take effect.
      </div>

      <h3>Preset catalog URLs</h3>
      <ul>
        <li><a href="#/" onclick="setCatalogUrl(defaultCatalogUrl)">Latest</a></li>
        <li><a href="#/" onclick="setCatalogUrl('testdata.json')">Local test data</a></li>
        <li><a href="#/"
               onclick="setCatalogUrl('https://storage.googleapis.com/repy-176217.appspot.com/981f009466c6007441b9833c326f40059f9c6433.json')">
            Final Winter 2018 Catalog</li>
        <li><a href="#/"
               onclick="setCatalogUrl('https://storage.googleapis.com/repy-176217.appspot.com/42e7f28aa5c6e02597256dd81a25d55118e9e1ac.json')">
            Final Spring 2018 Catalog</li>
        <li><a href="https://repy-176217.appspot.com/">Catalog of Catalogs</a>
          (copy JSON link into Catalog URL)</li>
      </ul>

      <p>Reload for settings to take effect.</p>

      <h3>Filters</h3>
      <ul>
        <li><input type="checkbox" onchange="saveSettings()" id="filter.noCollisions" /> No collisions</li>
        <li><input type="checkbox" onchange="saveSettings()" id="filter.noRunning" /> No running (no
          consecutive classes in different buildings)</li>
        <li><input type="checkbox" onchange="saveSettings()"
                                   id="filter.freeDays" />
          Free days (Minimum of
          <input type="number" id="filter.freeDays.min"
                               placeholder="0"
                               onchange="saveSettings()"/>
          and maximum of
          <input type="number" id="filter.freeDays.max"
                               placeholder="5"
                               onchange="saveSettings()"/>
      </ul>

      <h4>Forbidden groups</h4>

      <ul id="forbidden-groups"></ul>

      <p>Add forbidden groups by clicking <i>[forbid]</i> next to them on the
      catalog.</p>

      <h3>Developers</h3>
      <ul>
        <li><a onclick="addSelectedCourseByID(104016, 104004, 234112, 114051)"
               href="#/">Add sample courses</a></li>
        <li><a href="http://github.com/lutzky/ttime3">Repository</a></li>
        <li><a href="jasmine/SpecRunner.html">Run tests</a></li>
      </ul>
    </div>
    <h2>Selected courses</h2>
    <div id="selected-courses"></div>
    <div id="exception-occurred" style="display: none" class="error">
      An error has occurred while generating schedules. Please open your
      browser's javascript console and examine the error there. If reporting
      a bug, please include that output.
    </div>
    <div id="gen-schedules-button">
      <button id="generate-schedules" onclick="getSchedules()">Generate schedules</button>
      <img id="spinner" src="spinner.gif" style="visibility: hidden" />
    </div>
    <h2>Schedules</h2>
    <div id="no-schedules" style="display: none" class="info">
      No schedules are possible given the selected courses and constraints.
    </div>
    <div id="schedule-browser" style="display: none">
      <button onclick="prevSchedule()">&laquo;</button>Schedule <span id="current-schedule-id">?</span>
      of <span id="num-schedules">?</span><button onclick="nextSchedule()">&raquo;</button>
      <ul id="schedule-contents"></ul>
      <div id="rendered-schedule-container">
        <table id="day-headers">
          <tr>
            <th>&nbsp;<!-- Time column --></th>
            <th>Sunday</th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
          </tr>
        </table>
        <div id="rendered-schedule"></div>
      </div>
    </div>
    <div id="schedules"></div>
    <h2>Catalog</h2>
    <div id="catalog">(Loading courses)</div>
    <script src="common.js"></script>
    <script src="formatting.js"></script>
    <script src="render.js"></script>
    <script src="main.js"></script>
  </body>
</html>
